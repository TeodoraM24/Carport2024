<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/header :: common_header(~{::title},~{::link})}">
    <meta charset="UTF-8">
    <title>Beregn Tilbud</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../public/css/customer-request-style.css" th:href="@{/css/customer-request-style.css}" rel="stylesheet"/>
    <link href="../public/css/basic-style.css" th:href="@{/css/basic-style.css}" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
</head>
<body>
<div th:replace="~{fragments/header :: div.main-header}"></div>
<div class="body-background">
    <h1 class="customer-request-title">Forespørgsel: <span class="customer-name" th:text="${customerName}"></span></h1>
    <form action="/sendOffer" method="post">
    <div class="container">
        <div class="materials-table-container">
            <table>
                <thead>
                <tr class="header">
                    <th id="delete-material"></th>
                    <th id="material-id">Vare Nummer</th>
                    <th id="material-desc">Vare Beskrivelse</th>
                    <th id="additional-text">Hjælpe Tekst</th>
                    <th class="material-size">Længde</th>
                    <th class="material-size">Bredde</th>
                    <th class="material-size">Højde</th>
                    <th id="amount">Antal</th>
                    <th id="total-price">Total Pris</th>
                </tr>
                </thead>
                <tbody>
                <th:block th:each="item, i: ${partsListItems}">
                <tr>
                    <td><button type="submit" class="remove-button"><i class="fa fa-trash"></i></button></td>
                    <td th:text="${i.index+1}"></td>
                    <td><label>
                        <textarea required th:text="${item.material.description}"></textarea>
                    </label></td>
                    <td><label>
                        <textarea required th:text="${item.instruction}"></textarea>
                    </label></td>
                    <td>
                        <div class="measurement-number"><span th:text="${item.material.length}"></span> cm</div>
                    </td>
                    <td>
                        <div class="measurement-number"><span th:text="${item.material.width}"></span> mm</div>
                    </td>
                    <td>
                        <div class="measurement-number"><span th:text="${item.material.height}"></span> mm</div>
                    </td>
                    <td>
                        <div class="measurement-number"><span th:text="${item.amount}"></span><span th:text="${' ' + item.unit}"></span></div>
                    </td>
                    <td>
                        <div class="measurement-number">
                        <label>
                            <input type="number" class="input-price-size" required th:value="${item.amount * item.material.price}">
                        </label>
                        <span>kr.</span>
                        </div>
                    </td>
                </tr>
                </th:block>
                </tbody>
            </table>
        </div>
        <div class="price-container">
            <th:block th:object="${priceOffer}">
            <div class="display-price-container">
                <div class="display-coverage">
                    <h2 class="display-title">Dækningsgrad efter prisforslag</h2>
                    <h3 class="display-green-title">Ialt uden moms: <span th:text="${priceOffer.priceWithoutTax}"></span> kr.</h3>
                    <h4 class="display-purchase-price">Samlet kostpris: <span th:text="${priceOffer.purchasePrice}"></span> kr.</h4>
                    <h1 class="display-coverage-amount">Dækningsgrad: <span th:text="${priceOffer.coverage}"></span> %</h1>
                </div>
                <div class="display-price-offer">
                    <h2 class="display-title">Pris & Prisforslag</h2>
                    <h4 class="display-price" style="border-bottom-style: double">Pris uden moms: <span th:text="${priceOffer.priceWithoutTax}"></span> kr.</h4>
                    <h4 class="display-price">Pris med moms: <span th:text="${priceOffer.salesPrice}"></span> kr.</h4>
                    <h3 class="display-green-title" style="margin-top: 10px">Prisforslag ved salg:</h3>
                    <input class="input-new-price" type="number"> kr.
                    <h4 class="display-price" style="color: red; margin-top: 3px">Prisændring: <span>0</span> kr.</h4>
                </div>
            </div>
            <div class="display-buttons-container">
                <button type="submit" formaction="/saveOfferChanges" class="save-button" name="save-changes" value="Save" style="margin-right: 0">Gem ændringer</button>
                <button type="submit" formaction="/showDescription" class="blue-button" name="show-description" value="Description" style="margin-right: 0">Se beskrivelse</button>
                <button type="submit" formaction="/showDrawing" class="blue-button" name="show-drawing" value="Drawing" style="margin-right: 0">Se tegning</button>
                <button type="submit" class="cautious-button" name="send-offer" value="Offer" style="margin-right: 0">Send tilbud</button>
            </div>
            </th:block>
        </div>
    </div>
    </form>
</div>

</body>
</html>